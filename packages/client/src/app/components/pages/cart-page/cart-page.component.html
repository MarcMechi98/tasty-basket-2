<div class="cart-page">
  <app-title title="Cart"></app-title>
  <app-not-found
    [visible]=" !cart || !cart.items.length"
    message="Your cart is empty!"
    resetLinkText="Go to home page"
  ></app-not-found>

  <div class="general-container" *ngIf="cart?.items?.length">
    <div class="main-container">
      <ul class="items">
        <li *ngFor="let cartItem of cart.items" class="items__item">
          <div class="items__upper-container">
            <div>
              <img [src]="cartItem.food.imageUrl" alt="Cart item food image" />
            </div>

            <div>
              <a routerLink="/food/{{ cartItem.food.id }}">
                {{ cartItem.food.name }}
              </a>
            </div>

            <div>
              <select
                #quantitySelector
                [value]="cartItem.quantity"
                (change)="changeQuantity(cartItem, convertToNumber(quantitySelector.value))"
              >
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>

              <p>
                {{ cartItem.food.price | currency }}
              </p>
            </div>
          </div>

          <button class="items__remove-button" (click)="removeFromCart(cartItem)">
            Remove
          </button>
        </li>
      </ul>
    </div>

    <div class="checkout">
      <div class="checkout__container">
        <p class="checkout__count">Items count: <span>{{ cart.totalCount }}</span></p>
        <p class="checkout__total-price">Total price: <span>{{ cart.totalPrice | currency }}</span></p>
      </div>

      <app-default-button
        text="Proceed to checkout"
        [fontSizeRem]="1"
        routerLink="/checkout"
        [width]="'100%'"
      ></app-default-button>
    </div>
  </div>
</div>
